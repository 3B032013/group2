{% extends "member/base_member.html" %}

{% block title %}ç‚ºä½ æ¨è–¦çš„å…§å®¹{% endblock %}

{% block content %}

{# 1. å…ˆå®šç¾©å°ç›’å­ (Macro) #}
{% macro card_ui(item, type) %}
<div class="recommend-card">
    <div class="img-wrapper">
        <img src="{{ item.ThumbnailURL or 'https://placehold.co/400x300?text=No+Image' }}" alt="img">
    </div>
    <div class="recommend-body">
        <div class="recommend-title">
            {% if type == 'attraction' %}{{ item.AttractionName }}
            {% elif type == 'restaurant' %}{{ item.RestaurantName }}
            {% else %}{{ item.HotelName }}{% endif %}
        </div>
        <div class="recommend-category">{{ item.RestaurantCategory or 'æ¨è–¦é …ç›®' }}</div>
        <div class="recommend-location">ğŸ“ {{ item.City or 'å°ç£' }}</div>
        <div class="recommend-actions mt-auto">
            <button class="btn btn-sm btn-outline-primary w-100">â• åŠ å…¥è¡Œç¨‹</button>
        </div>
    </div>
</div>
{% endmacro %}

{# 2. CSS æ¨£å¼ #}
<style>
  .recommend-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin-bottom: 24px;
  }
  .recommend-card {
    background: #ffffff;
    border-radius: 14px;
    overflow: hidden;
    border: 1px solid #eaeaea;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    display: flex;
    flex-direction: column;
    min-height: 330px;
  }
  .img-wrapper { width: 100%; height: 160px; background: #f2f2f2; overflow: hidden; }
  .img-wrapper img { width: 100%; height: 100%; object-fit: cover; }
  .recommend-body { padding: 12px 14px; display: flex; flex-direction: column; flex: 1; }
  .recommend-title { font-size: 15px; font-weight: 700; min-height: 40px; margin-bottom: 6px; }
  .recommend-category { font-size: 13px; color: #ff9f6e; font-weight: 600; }
  .recommend-location { font-size: 13px; color: #555; margin-bottom: 10px; }
  
  .nav-pills .nav-link { border-radius: 50px; padding: 8px 20px; color: #555; border: 1px solid #ddd; margin-right: 10px; }
  .nav-pills .nav-link.active { background-color: #ff9f6e; border-color: #ff9f6e; color: white !important; }
  
  @media (max-width: 1200px) { .recommend-grid { grid-template-columns: repeat(2, 1fr); } }
  @media (max-width: 768px) { .recommend-grid { grid-template-columns: 1fr; } }
</style>

{# 3. é é¢ä¸»è¦å…§å®¹ #}
<div class="container">
    <h1 class="mb-2">ç‚ºä½ æ¨è–¦çš„å…§å®¹</h1>
    <p class="text-muted mb-4">æ ¹æ“šä½ çš„åå¥½è¨­å®šï¼Œæˆ‘å€‘ç‚ºä½ æº–å‚™äº†ä»¥ä¸‹ç²¾é¸é …ç›®ã€‚</p>

    <ul class="nav nav-pills mb-4" id="recommendTab" role="tablist">
        <li class="nav-item"><button class="nav-link active" data-bs-toggle="pill" data-bs-target="#tab-all">æ¨è–¦ç¸½è¦½</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-attractions">ğŸ› æ™¯é»</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-food">ğŸ¥˜ ç¾é£Ÿ</button></li>
        <li class="nav-item"><button class="nav-link" data-bs-toggle="pill" data-bs-target="#tab-hotels">ğŸ¨ ä½å®¿</button></li>
    </ul>

    <hr>

    <div class="tab-content">
        <div class="tab-pane fade show active" id="tab-all">
            {% if attractions %}<h4 class="mt-4 mb-3">ğŸ ç²¾é¸æ™¯é»</h4><div class="recommend-grid">{% for item in attractions[:3] %}{{ card_ui(item, 'attraction') }}{% endfor %}</div>{% endif %}
            {% if restaurants %}<h4 class="mt-5 mb-3">ğŸ½ ç²¾é¸ç¾é£Ÿ</h4><div class="recommend-grid">{% for item in restaurants[:3] %}{{ card_ui(item, 'restaurant') }}{% endfor %}</div>{% endif %}
            {% if hotels %}<h4 class="mt-5 mb-3">ğŸ¨ ç²¾é¸ä½å®¿</h4><div class="recommend-grid">{% for item in hotels[:3] %}{{ card_ui(item, 'hotel') }}{% endfor %}</div>{% endif %}
        </div>

        <div class="tab-pane fade" id="tab-attractions">
            <h4 class="mt-4 mb-3">æ‰€æœ‰æ¨è–¦æ™¯é»</h4>
            <div class="recommend-grid">{% for item in attractions %}{{ card_ui(item, 'attraction') }}{% endfor %}</div>
        </div>

        <div class="tab-pane fade" id="tab-food">
            <h4 class="mt-4 mb-3">æ‰€æœ‰æ¨è–¦ç¾é£Ÿ</h4>
            <div class="recommend-grid">{% for item in restaurants %}{{ card_ui(item, 'restaurant') }}{% endfor %}</div>
        </div>

        <div class="tab-pane fade" id="tab-hotels">
            <h4 class="mt-4 mb-3">æ‰€æœ‰æ¨è–¦ä½å®¿</h4>
            <div class="recommend-grid">{% for item in hotels %}{{ card_ui(item, 'hotel') }}{% endfor %}</div>
        </div>
    </div>
</div>

{% endblock %} {# æ‰€æœ‰çš„ endmacro éƒ½åœ¨é€™å€‹ endblock ä¹‹å‰é—œé–‰äº† #}